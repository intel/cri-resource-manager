policy:
  name: heat
  config: |
    # IntervalMs is the length of the period in milliseconds
    # in which new heats are calculated for pages based on gathered
    # tracker values, and page move tasks are triggered.
    intervalms: 10000
    # Cgroups is a list of cgroup paths in the filesystem. The
    # policy manages processes in listed cgroups and recursively
    # in their subgroups.
    cgroups:
      - /sys/fs/cgroup/foobar
    # HeatNumas maps heat class values into NUMA node lists where
    # pages of each heat class should be located. If a heat class
    # is missing, the NUMA node is "don't care".
    heatnumas:
      0: [2, 3]
      3: [0, 1]
    heatmap:
      # HeatMax is the maximum heat of a range
      heatmax: 0.001
      # HeatRetention is the portion of the remaining heat in a region
      # after one second of complete inactivity.
      # - 1.0: heat never cools down
      # - 0.0: all heat cools down immediately
      # - If you want that 5 % of the heat remains after 60 seconds of inactivity,
      #   HeatRetention = 0.05 ** (1.0/60) = 0.9513
      heatretention: 0.99
      # HeatClasses is the number of discrete heat classes. The default is 10,
      # which means that address ranges are classified:
      # heat class 0: heat [HeatMax*0/10, HeatMax*1/10)
      # heat class 1: heat [HeatMax*1/10, HeatMax*2/10)
      # ...
      # heat class 9: heat [HeatMax*9/10, HeatMax*10/10]
      heatclasses: 4

    # Memory tracker configuration for the heat policy
    tracker:
      name: damon
      config: |
        # Connection specifies how to connect to the damon. "perf"
        # connects by tracing damon:aggregated using perf. Options
        # can be appended to the perf trace command. For example,
        # trace only address ranges where accesses have been detected
        # by adding a filter: "perf --filter nr_accesses>0".
        connection: perf --filter nr_accesses>0
        # SamplingUs is the sampling interval in debugfs/damon attrs
        # (microseconds).
        samplingus: 1000
        # AggregationUs is the aggregation interval in debugfs/damon
        # attrs (microseconds).
        aggregationus: 1000000
        # RegionsUpdateUs is the regions update interval in
        # debugfs/damon attrs (microseconds).
        regionsupdateus: 5000000
        # MinTargetRegions is the minimum number of monitoring target
        # regions in debugfs/damon attrs.
        mintargetregions: 1000
        # MaxTargetRegions is the maximum number of monitoring target
        # regions in debugfs/damon attrs.
        maxtargetregions: 20000

    # Low-level page mover configuration
    mover:
      # IntervalMs is the minimum interval between subsequent moves
      # in milliseconds.
      intervalms: 20
      # Bandwidth is the maximum memory bandwidth in MB/s
      bandwidth: 200
